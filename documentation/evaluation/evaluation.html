<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Evaluation &mdash; libemg 2.0.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Animation" href="../animation/animation.html" />
    <link rel="prev" title="EMG Prediction" href="../prediction/prediction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> libemg
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction/introduction.html">Introduction</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modules:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../data/data.html">Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filtering/filtering.html">Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/features.html">Feature Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../feature_selection/feature_selection.html">Feature Selection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prediction/prediction.html">EMG Prediction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Evaluation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#offline-evaluation">Offline Evaluation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#classification-accuracy-ca"><strong>Classification Accuracy (CA)</strong> *</a></li>
<li class="toctree-l3"><a class="reference internal" href="#active-error-aer"><strong>Active Error (AER)</strong> *</a></li>
<li class="toctree-l3"><a class="reference internal" href="#instability-ins"><strong>Instability (INS)</strong> *</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rejection-rate-rej-rate"><strong>Rejection Rate (REJ_RATE)</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#confusion-matrix-conf-mat"><strong>Confusion Matrix (CONF_MAT)</strong> *</a></li>
<li class="toctree-l3"><a class="reference internal" href="#recall-recall"><strong>Recall (RECALL)</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#precision-prec"><strong>Precision (PREC)</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#f1-score-f1"><strong>F1 Score (F1)</strong></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#online-evaluation">Online Evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../animation/animation.html">Animation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tools:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../screen_guided_training/sgt.html">Screen Guided Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../supported_hardware/supported_hardware.html">Supported Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visualization/visualization.html">Visualizations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../emg_toolbox.html">Data Handler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../emg_toolbox.html#module-libemg.datasets">Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../emg_toolbox.html#module-libemg.filtering">Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../emg_toolbox.html#module-libemg.feature_extractor">Feature Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../emg_toolbox.html#module-libemg.feature_selector">Feature Selection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../emg_toolbox.html#module-libemg.emg_predictor">EMG Prediction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../emg_toolbox.html#module-libemg.offline_metrics">Offline Evaluation Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../emg_toolbox.html#module-libemg.utils">Utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../emg_toolbox.html#module-libemg.streamers">Streamers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../emg_toolbox.html#module-libemg.gui">Screen Guided Training</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Offline Examples:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples/simple_offline_example/simple_offline_example.html">Simple Offline Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/features_and_group_example/features_and_group_example.html">Exploring Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/feature_optimization_example/feature_optimization_example.html">Optimizing Feature Params</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/deep_learning_example/deep_learning_example.html">Deep Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/offline_regression_example/offline_regression_example.html">Offline Regression Analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Online Examples:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples/snake_example/snake_example.html">Continuous Control (Snake)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/unity_example/unity_example.html">Cross Platform Control (Unity)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/mouse_example/mouse_example.html">Proportional Control (Mouse Interface)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/mixed_reality_example/mixed_reality_example.html">Mixed Reality (Hololens 2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/fitts_example/fitts_example.html">Online Evaluation (Iso Fitts)</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">libemg</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Evaluation</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/libemg/libemg/blob/main/docs/source/documentation/evaluation/evaluation.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="evaluation">
<h1>Evaluation<a class="headerlink" href="#evaluation" title="Permalink to this heading"></a></h1>
<p>Evaluation techniques for myoelectric control can be divided into two categories: <strong>online</strong> and <strong>offline</strong> evaluation. This section presents each type of evaluation, explores their use cases, and provides suggestions on the best evaluation standards for a given project.</p>
<section id="offline-evaluation">
<h2>Offline Evaluation<a class="headerlink" href="#offline-evaluation" title="Permalink to this heading"></a></h2>
<p>Offline evaluation involves testing a model using pre-recorded data by leveraging offline metrics. While these metrics do not necessarily correlate to online usability, they provide insight into the potential performance of a control system. Additionally, they are valuable for evaluating different control system parameters and exploring different algorithms before system deployment. An example of extracting offline metrics from predictions and labels can be found in the following code snippet. Stars beside the metrics indicate their popularity for evaluating EMG-based control systems.</p>
<details>
<summary><b>Example Code and Output</b></summary>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">libemg.offline_metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">OfflineMetrics</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span> <span class="p">:</span>
    <span class="n">y_true</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
    <span class="n">y_preds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>

    <span class="n">om</span> <span class="o">=</span> <span class="n">OfflineMetrics</span><span class="p">()</span>

    <span class="c1"># Get and extract all available metrics:</span>
    <span class="n">metrics</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">get_available_metrics</span><span class="p">()</span>
    <span class="n">offline_metrics</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">extract_offline_metrics</span><span class="p">(</span><span class="n">metrics</span><span class="o">=</span><span class="n">metrics</span><span class="p">,</span> <span class="n">y_true</span><span class="o">=</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_predictions</span><span class="o">=</span><span class="n">y_preds</span><span class="p">,</span> <span class="n">null_label</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">offline_metrics</span><span class="p">)</span>
    <span class="n">om</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="n">offline_metrics</span><span class="p">)</span>

    <span class="c1"># Get and extract a subset of metrics:</span>
    <span class="n">metrics</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;AER&#39;</span><span class="p">,</span> <span class="s1">&#39;CA&#39;</span><span class="p">,</span> <span class="s1">&#39;INS&#39;</span><span class="p">]</span>
    <span class="n">offline_metrics</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">extract_offline_metrics</span><span class="p">(</span><span class="n">metrics</span><span class="o">=</span><span class="n">metrics</span><span class="p">,</span> <span class="n">y_true</span><span class="o">=</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_predictions</span><span class="o">=</span><span class="n">y_preds</span><span class="p">,</span> <span class="n">null_label</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">offline_metrics</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="" src="../../_images/visualize.png" /></p>
</details>
<br/>
<section id="classification-accuracy-ca">
<h3><strong>Classification Accuracy (CA)</strong> *<a class="headerlink" href="#classification-accuracy-ca" title="Permalink to this heading"></a></h3>
<p>The percentage of correctly predicted samples. While this is a common evaluation metric, it does not necessarily correlate to online usability.</p>
<p><span class="math notranslate nohighlight">\(
\text{CA} = \frac{1}{N}\sum_{i=1}^{N}\hat{y}_{i} == {y}_{i}
\)</span></p>
<p>where <span class="math notranslate nohighlight">\(N\)</span> is the total number of data frames/predictions, <span class="math notranslate nohighlight">\(\hat{y}_{i}\)</span> is the predicted class label for frame <span class="math notranslate nohighlight">\(i\)</span>, and <span class="math notranslate nohighlight">\(y_{i}\)</span> is the true class label for frame i.</p>
</section>
<section id="active-error-aer">
<h3><strong>Active Error (AER)</strong> *<a class="headerlink" href="#active-error-aer" title="Permalink to this heading"></a></h3>
<p>The percentage of incorrect predictions,  ignoring No Movement predictions. This metric evaluates the performance of a classifier on active class decisions. This is valuable as the No Movement class typically correlates to “do nothing” functionality.</p>
<p><span class="math notranslate nohighlight">\(
\text{AER} = \frac{1}{N}\sum_{i=1}^{N}\hat{y}_{i} \ne {y}_{i} \space \text{and} \space \hat{y}_{i} \ne y_{NM}
\)</span></p>
<p>where <span class="math notranslate nohighlight">\(N\)</span> is the total number of data frames/predictions, <span class="math notranslate nohighlight">\(\hat{y}_{i}\)</span> is the predicted class label for frame <span class="math notranslate nohighlight">\(i\)</span>, <span class="math notranslate nohighlight">\(y_{i}\)</span> is the true class label for frame i, and <span class="math notranslate nohighlight">\(y_{NM}\)</span> is the no movement/null class.</p>
</section>
<section id="instability-ins">
<h3><strong>Instability (INS)</strong> *<a class="headerlink" href="#instability-ins" title="Permalink to this heading"></a></h3>
<p>The number of times that subsequent predictions differ, normalized by the total number of predictions. This metric provides insight into the stability of a classifier (i.e., lack of fluctuating predictions).</p>
<p><span class="math notranslate nohighlight">\(
\text{INS} = \frac{1}{N}\sum_{i=2}^{N}\hat{y}_{i} \ne \hat{y}_{i-1}
\)</span></p>
<p>where <span class="math notranslate nohighlight">\(N\)</span> is the total number of data frames/predictions, and <span class="math notranslate nohighlight">\(\hat{y}_{i}\)</span> is the predicted class label for frame <span class="math notranslate nohighlight">\(i\)</span>.</p>
</section>
<section id="rejection-rate-rej-rate">
<h3><strong>Rejection Rate (REJ_RATE)</strong><a class="headerlink" href="#rejection-rate-rej-rate" title="Permalink to this heading"></a></h3>
<p>For control systems leveraging rejection, this metric corresponds to the percentage of rejected decisions. This gives insight into whether the system is over or under-rejecting.</p>
<p><span class="math notranslate nohighlight">\(
\text{REJ_RATE} = \frac{1}{N}\sum_{i=1}^{N}\hat{y}_{i} == y_{rej}
\)</span></p>
<p>where <span class="math notranslate nohighlight">\(N\)</span> is the total number of data frames/predictions, <span class="math notranslate nohighlight">\(\hat{y}_{i}\)</span> is the predicted class label for frame <span class="math notranslate nohighlight">\(i\)</span>, and <span class="math notranslate nohighlight">\(y_{rej}\)</span> is the rejection label (default = -1).</p>
</section>
<section id="confusion-matrix-conf-mat">
<h3><strong>Confusion Matrix (CONF_MAT)</strong> *<a class="headerlink" href="#confusion-matrix-conf-mat" title="Permalink to this heading"></a></h3>
<p>A confusion Matrix is a <span class="math notranslate nohighlight">\(C\)</span> x <span class="math notranslate nohighlight">\(C\)</span> matrix, where <span class="math notranslate nohighlight">\(C\)</span> is the number of classes. Each row of the matrix represents the true label, and each column represents the predicted label. This matrix provides valuable insight into what classes get confused with others.</p>
<style>
    img {
        width: 50%;
        display: block;
        margin-left: auto;
        margin-right: auto;
    }
</style>
<p><img alt="alt text" src="../../_images/conf_mat.png" /></p>
</section>
<section id="recall-recall">
<h3><strong>Recall (RECALL)</strong><a class="headerlink" href="#recall-recall" title="Permalink to this heading"></a></h3>
<p>The measure that relates the times you predicted the active class correctly over the total number of active class occurences.</p>
<p><span class="math notranslate nohighlight">\(
\text{RECALL} = \frac{TP}{(FN + TP)}
\)</span></p>
<p>where <span class="math notranslate nohighlight">\(TP\)</span> is the number of true positives, and <span class="math notranslate nohighlight">\(FN\)</span> is the number of false negatives.</p>
</section>
<section id="precision-prec">
<h3><strong>Precision (PREC)</strong><a class="headerlink" href="#precision-prec" title="Permalink to this heading"></a></h3>
<p>The meaure that relates the times you predicted the active class correctly over all the times you predicted the active class.</p>
<p><span class="math notranslate nohighlight">\(
\text{PREC} = \frac{TP}{(FP + TP)}
\)</span></p>
<p>where <span class="math notranslate nohighlight">\(TP\)</span> is the number of true positives, and <span class="math notranslate nohighlight">\(FP\)</span> is the number of false positives.</p>
</section>
<section id="f1-score-f1">
<h3><strong>F1 Score (F1)</strong><a class="headerlink" href="#f1-score-f1" title="Permalink to this heading"></a></h3>
<p>A measure of accuracy that has been normalized by the number of samples within the class. Good for datasets with unbalanced class representation.</p>
<p><span class="math notranslate nohighlight">\(
\text{F1} = 2 \times \frac{(Precision \times Recall)}{Precision + Recall}
\)</span></p>
</section>
</section>
<section id="online-evaluation">
<h2>Online Evaluation<a class="headerlink" href="#online-evaluation" title="Permalink to this heading"></a></h2>
<p>Online evaluation involves user-in-the-loop interaction, meaning that users get real-time feedback as they interact with the control system. One online evaluation technique popular within the prosthetics community involves leveraging Fitts law tests <sup>[1]</sup>. This is common in the prosthetics community as prostheses are expensive, and fittings are complicated. For more generic use cases, online evaluation should involve user-in-the-loop feedback. Ultimately, to properly evaluate the online performance of a control system, the OnlineEMGClassifier module should be leveraged.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this heading"></a></h2>
<p><a id="1">[1]</a>
Scheme EJ, Englehart KB. Validation of a selective ensemble-based classification scheme for myoelectric control using a three-dimensional Fitts’ Law test. IEEE Trans Neural Syst Rehabil Eng. 2013 Jul;21(4):616-23. doi: 10.1109/TNSRE.2012.2226189. Epub 2012 Oct 25. PMID: 23193252.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../prediction/prediction.html" class="btn btn-neutral float-left" title="EMG Prediction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../animation/animation.html" class="btn btn-neutral float-right" title="Animation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>